<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Work - F²LAMEA</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <!-- Add rss-parser library from CDN for podcast player -->
    <script src="https://unpkg.com/rss-parser@3.13.0/dist/rss-parser.min.js"></script>
</head>
<body class="work-page">
    <!-- Fixed Podcast Toggle Button -->
    <button id="podcast-toggle-btn" class="podcast-toggle-btn" onclick="togglePodcastBox()">Podcast</button>

    <!-- Sticky Podcast Box -->
    <div id="podcast-box" class="podcast-box">
        <div class="podcast-header">
            <h3>Latest Podcasts</h3>
            <button class="podcast-close-btn" onclick="togglePodcastBox()">×</button>
        </div>
        <div id="episode-list" class="episode-list"></div>
    </div>

    <header>
        <div class="container">
            <h1>F²LAMEA</h1>
            <p>Fathers & Family Legal Advocacy Movement for Equality and Accountability</p>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="our-work.html" class="active">Our Work</a></li>
                    <li><a href="news-books.html">Latest News & Articles</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="resources.html">Resources</a></li>
                    <li><a href="contact.html">Contact Us</a></li>
                    <li><button class="search-btn" onclick="toggleSearch()">Search</button></li>
                </ul>
                <!-- Search container -->
                <div id="search-container">
                    <input type="text" id="search-input" placeholder="Search Flamea...">
                    <button onclick="performSearch()">Go</button>
                </div>
            </nav>
        </div>
    </header>

    <section class="work-strategies">
        <div class="container">
            <h2>Our Strategies</h2>
            <p>We employ a multi-faceted approach to advocate for fathers and families, ensuring systemic change and support at every level:</p>
            <ul class="icon-list">
                <li><i class="fas fa-gavel"></i> <strong>Legal Advocacy:</strong> We provide resources and support for fathers navigating family courts, pushing for fair legal processes.</li>
                <li><i class="fas fa-book"></i> <strong>Education & Awareness:</strong> Through publications, podcasts, and media, we educate the public on systemic biases.</li>
                <li><i class="fas fa-users"></i> <strong>Community Building:</strong> We foster a supportive network for fathers and families to share experiences and solutions.</li>
                <li><i class="fas fa-balance-scale"></i> <strong>Policy Reform:</strong> We work with policymakers to drive legislative changes for equality and accountability.</li>
            </ul>
        </div>
    </section>

    <section class="work-funding">
        <div class="container">
            <h2>Funding</h2>
            <p>F²LAMEA’s efforts are self-funded by the founder, who is the primary contributor for all activities. We also receive support in all forms from family and friends, as well as people like you who feel this injustice needs to end. Support can be in all forms, contributing your expertise, ideas, and experience, as well as financial. Contact us for more information on how you can contribute or support this worthy cause.</p>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-contact">
                <p><strong>Email:</strong> <a href="mailto:flamea2024@gmail.com">flamea2024@gmail.com</a></p>
                <p><strong>Website:</strong> <a href="https://flamea.org/" target="_blank">https://flamea.org/</a></p>
                <p><strong>X (Twitter):</strong> <a href="https://twitter.com/flamea2024" target="_blank"><i class="fab fa-x-twitter"></i> @flamea2024</a></p>
                <p><strong>YouTube:</strong> <a href="https://www.youtube.com/@Flamea2024" target="_blank"><i class="fab fa-youtube"></i> @Flamea2024</a></p>
                <p><strong>Books Available from:</strong></p>
                <ul>
                    <li><a href="https://play.google.com/store/search?q=salatiso&c=books&hl=en_ZA" target="_blank">Google Play Books</a></li>
                    <li><a href="https://books.apple.com/au/author/salatiso-mdeni/id1745396063" target="_blank">Apple Books</a></li>
                    <li><a href="https://www.takealot.com/goliath-s-reckoning/PLID96099334" target="_blank">Takealot</a></li>
                </ul>
            </div>
            <p>© 2025 F²LAMEA. All rights reserved.</p>
            <p>Icons provided by <a href="https://fontawesome.com/license/free" target="_blank">Font Awesome (CC BY 4.0)</a>. Podcast functionality powered by <a href="https://github.com/bobby-brennan/rss-parser" target="_blank">rss-parser (MIT License)</a>.</p>
            <p><a href="privacy.html">Privacy Policy</a></p>
        </div>
    </footer>

    <script>
        // Search functionality
        function toggleSearch() {
            const searchContainer = document.getElementById('search-container');
            searchContainer.style.display = searchContainer.style.display === 'none' ? 'block' : 'none';
        }

        function performSearch() {
            const query = document.getElementById('search-input').value.trim();
            if (query) {
                alert('Searching for: ' + query); // Replace with your search logic if needed
            }
        }

        // Podcast player functionality
        let isPodcastLoaded = false; // Boolean flag to track if episodes are loaded

        function togglePodcastBox() {
            const podcastBox = document.getElementById('podcast-box');
            if (podcastBox.classList.contains('show')) {
                podcastBox.classList.remove('show');
            } else {
                podcastBox.classList.add('show');
                if (!isPodcastLoaded) {
                    loadPodcastEpisodes(); // Load episodes only if not already loaded
                }
            }
        }

        async function loadPodcastEpisodes() {
            const episodeList = document.getElementById('episode-list');
            if (isPodcastLoaded) return; // Only load once

            const parser = new RSSParser();
            const CORS_PROXY = "https://api.allorigins.win/raw?url=";
            const feedUrl = "https://anchor.fm/s/10357aacc/podcast/rss";

            try {
                const feed = await parser.parseURL(CORS_PROXY + feedUrl);
                feed.items.forEach(item => {
                    const episodeDiv = document.createElement('div');
                    episodeDiv.className = 'episode';
                    episodeDiv.innerHTML = `
                        <h4>${item.title}</h4>
                        <p>${item.pubDate}</p>
                        <audio controls>
                            <source src="${item.enclosure.url}" type="${item.enclosure.type}">
                            Your browser does not support the audio element.
                        </audio>
                    `;
                    episodeList.appendChild(episodeDiv);
                });
                isPodcastLoaded = true; // Set flag to true after loading
            } catch (error) {
                episodeList.innerHTML = '<p>Error loading podcast episodes. Please try again later.</p>';
                console.error('Error fetching RSS feed:', error);
            }
        }
    </script>
</body>
</html>
